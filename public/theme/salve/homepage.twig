{% extends 'partials/_master.twig' %}

{% setcontent ctaButtons = 'cta-buttons' orderby '-title' %}
{% setcontent features = 'features' orderby 'id' %}
{% setcontent showcase = 'showcase/fullt-utrustad-hemsida' %}

{% set imageArr = [] %}
{% for slide in showcase.slides %}

    {% if slide.type == "image" %}
        {% set imageArr = imageArr|merge([slide.value|json_encode]) %}
    {% endif %}
{% endfor %}


{% block main %}

    {# HERO SECTION #}
    <section aria-label="hero section" class="flex justify-center">
        <div class="w-full max-w-screen-xl">
            <div class="brand-blue min-h-96 pb-16">
                <div class="py-8 md:py-20 px-8 sm:px-16  max-w-screen-sm relative z-10">
                    <h1 class="text-3xl md:text-5xl font-bold leading-none">{{ record.introduction|plaintext }}</h1>
                    <p class="mt-4 tracking-wide leading-8 max-w-md">
                        {{ record.content|plaintext }}
                    </p>
                    <div class="mt-8 md:mt-16 flex gap-4">
                        {% for cta in ctaButtons %}
                            {% include 'partials/_cta_button.twig' with {'text': cta.title, 'anchor': '#', 'primaryColor': cta.button_color, 'outline': cta.solid} %}
                        {% endfor %}
                    </div>
                </div>
            </div>
        </div>
    </section>

    {# FEATURES #}
    <section aria-label="features" class="bg-purple-100 flex flex-col items-center relative">
        <div class="brand-purple-bg relative text-white py-0 relative z-10 max-w-screen-xl flex flex-col md:gap-y-0">
            {% for feature in features %}
                {% if loop.index0 is divisible by(2) %}
                    {% include 'partials/_feature.twig' with {'feature': feature, 'orientation': 'left', iteration: loop.index} %}
                {% else %}
                    {% include 'partials/_feature.twig' with {'feature': feature, 'orientation':  'right', iteration: loop.index} %}
                {% endif %}
            {% endfor %}
        </div>
    </section>

    {# SHOWCASE #}
    <section aria-label="showcase section" class="px-8 sm:px-16 py-32 flex flex-col justify-center relative bg-white z-1">
        <div class="mx-auto w-full max-w-screen-xl relative flex flex-col">
            <div class="relative self-center">
                <img class="hidden lg:block absolute -ml-10 h-16 w-16" src="{{ asset("images/squares.svg") }}" alt="">
                <h2 class="inline-block text-4xl relative text-center">
                    Showcase
                </h2>
            </div>
            <p class="text-center mt-8 mb-16">Hemsida med målinriktad design, CMS och analytics.</p>
            <div class="flex justify-center">
                <div class="flex flex-col lg:w-1/2">
                    <div class="h-80 overflow-hidden bg-gray-50 flex items-center">
                        <div id="carousel" class="" ></div>
                    </div>
                    <div class="h-12 mt-auto">
                        <p class="font-light inline-block" id="carousel-text"></p>
                    </div>
                    <p class="text-lg mt-8">Allt detta ingår när du väljer en fullt utrustad hemsida:</p>
                    <div class="flex flex-wrap gap-4 gap-y-1 font-light">
                        <div class="flex gap-1 w-40">
                            <img src="{{ asset('images/checkmark.svg') }}" alt="">
                            <p class="mt-1">Webdesign</p>
                        </div>
                        <div class="flex gap-1 w-40">
                            <img src="{{ asset('images/checkmark.svg') }}" alt="">
                            <p class="mt-1">Webbsidor</p>
                        </div>
                        <div class="flex gap-1 w-40">
                            <img src="{{ asset('images/checkmark.svg') }}" alt="">
                            <p class="mt-1">Formulär</p>
                        </div>
                        <div class="flex gap-1 w-40">
                            <img src="{{ asset('images/checkmark.svg') }}" alt="">
                            <p class="mt-1">CMS</p>
                        </div>

                        <div class="flex gap-1 w-40">
                            <img src="{{ asset('images/checkmark.svg') }}" alt="">
                            <p class="mt-1">Publicering</p>
                        </div>
                        <div class="flex gap-1 w-40">
                            <img src="{{ asset('images/checkmark.svg') }}" alt="">
                            <p class="mt-1">Flerspråksstöd</p>
                        </div>
                        <div class="flex gap-1 w-40">
                            <img src="{{ asset('images/checkmark.svg') }}" alt="">
                            <p class="mt-1">Användarstöd</p>
                        </div>
                        <div class="flex gap-1 w-40">
                            <img src="{{ asset('images/checkmark.svg') }}" alt="">
                            <p class="mt-1">Analytics</p>
                        </div>

                        <div class="flex gap-1 w-40">
                            <img src="{{ asset('images/checkmark.svg') }}" alt="">
                            <p class="mt-1">Responsiv</p>
                        </div>
                        <div class="flex gap-1 w-40">
                            <img src="{{ asset('images/checkmark.svg') }}" alt="">
                            <p class="mt-1">SEO</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="absolute h-0.5 w-1/2 bottom-0 left-1/4 bg-gray-100"></div>
    </section>
{% endblock %}

{% block scripts %}
    <script type="module">
        import CarouselHandler from "{{ asset('js/CarouselHandler.js') }}";


        const images = [
            {% for image in imageArr %}
            {{ image|raw }},
            {% endfor %}
        ];

        const carouselHandler = CarouselHandler(images);

        const clickHandel = () => {
            carouselHandler();
        };

        window.addEventListener('click', e => {
            console.log(e.target.parentElement);
            if (e.target.parentElement.id === 'carousel') {
                clickHandel();
            }
        });
    </script>
{% endblock %}