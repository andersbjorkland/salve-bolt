{# This file might seem a little complex, because of the high density of tags.
   It uses Twig macros and ternary selectors. Read up on them, if required:
   macros: http://twig.sensiolabs.org/doc/templates.html#macros
   ternary operators: http://twig.sensiolabs.org/doc/templates.html#other-operators
#}

{# The 'recursive' macro, for inserting one menu item. If it has a submenu, it
   invokes itself to insert the items of the submenus. #}
{% macro display_menu_item(item, loop, withsubmenus) %}
    {% from _self import display_menu_item %}
    {% apply spaceless %}
        <a href="{{ item.uri }}" title='{{ item.title }}' class='{{ item.class }} {{ loop.first ? ' first' -}}
        {{ loop.last ? ' last' -}}
        {{ item|current ? ' active' }}'>
            {{- item.label -}}
        </a>
    {% endapply %}
{% endmacro %}

{# Make the macro available for use #}
{% from _self import display_menu_item %}

{# The main menu loop: Iterates over the items, calling `display_menu_item` #}
<nav class="mt-4 mt:mt-0 md:ml-auto pb-1 flex flex-col items-end">
    <div id="language-selector" class="md:mt-8 text-sm order-2 md:order-1">
        {% for locale in locales() %}
            <a id="swedish-selector" class="{{ locale.current ? 'active': '' }}" href="{{ locale.link }}">{{ locale.emoji }} {{ locale.localizedname }}</a>
        {% endfor %}
    </div>

    <div class="mt-auto font-bold flex gap-4 order-1 md:order-2">
    {% for item in menu %}
        {% if item.label is defined %}
            {{ display_menu_item(item, loop, withsubmenus) }}
        {% endif %}
    {% endfor %}
    </div>
</nav>

